# CodeSight Project Testing Environment
# Copy this file to .env.test for testing purposes
# Generated: 2025-01-27

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

NODE_ENV=test
APP_NAME=codesight-test
APP_VERSION=0.1.0

# Server configuration
PORT=4002
HOST=localhost
API_PREFIX=/api

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

DATABASE_URL=sqlite://./data/test_code_intelligence.db

# PostgreSQL configuration (for integration tests)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=code_intelligence_test

# Connection pool settings
DB_POOL_MIN=1
DB_POOL_MAX=5
DB_CONNECTION_TIMEOUT=10000

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

REDIS_URL=redis://localhost:6379/1
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=1

# =============================================================================
# MCP SERVER CONFIGURATION
# =============================================================================

MCP_PORT=3002
MCP_HOST=localhost
MCP_ENABLE_LOGGING=true
MCP_LOG_LEVEL=debug

MCP_ENABLE_SEARCH=true
MCP_ENABLE_INDEXING=true
MCP_ENABLE_ANALYSIS=true
MCP_MAX_RESULTS=50
MCP_SEARCH_TIMEOUT=10000

# =============================================================================
# RUST FFI CONFIGURATION
# =============================================================================

ENABLE_RUST_FFI=true
RUST_FFI_PATH=../rust-core/target/debug
FFI_GRACEFUL_FALLBACK=true

NAPI_MODULE_PATH=./codesight-native.node
NAPI_DEBUG=true

# =============================================================================
# API SERVER CONFIGURATION
# =============================================================================

API_PORT=4003
API_HOST=localhost
API_ENABLE_CORS=true
API_ENABLE_RATE_LIMIT=false
API_RATE_LIMIT_REQUESTS=1000
API_RATE_LIMIT_WINDOW=60000

JWT_SECRET=test-super-secret-jwt-key
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=24h

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================

# Frontend testing
VITE_API_BASE_URL=http://localhost:4002
VITE_MCP_BASE_URL=http://localhost:3002
VITE_ENABLE_DEV_TOOLS=true

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

LOG_LEVEL=debug
LOG_FORMAT=dev
LOG_FILE=./logs/test.log
LOG_MAX_SIZE=5MB
LOG_MAX_FILES=2

# =============================================================================
# MONITORING AND METRICS
# =============================================================================

ENABLE_METRICS=false
METRICS_PORT=9091
METRICS_PATH=/metrics

HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=10000

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

CORS_ORIGIN=http://localhost:3000
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization

RATE_LIMIT_ENABLED=false
HELMET_ENABLED=false
XSS_PROTECTION=false
CONTENT_SECURITY_POLICY=false

# =============================================================================
# FILE AND DIRECTORY CONFIGURATION
# =============================================================================

DATA_DIR=./data/test
CACHE_DIR=./cache/test
LOGS_DIR=./logs/test
UPLOADS_DIR=./uploads/test
TEMP_DIR=./temp/test

RUST_TARGET_DIR=../rust-core/target
RUST_RELEASE_DIR=../rust-core/target/debug

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

DEV_MODE=true
DEV_HOT_RELOAD=true
DEV_SOURCE_MAPS=true
DEV_VERBOSE_LOGGING=true

TEST_MODE=true
TEST_DATABASE_URL=sqlite://./data/test_code_intelligence.db
TEST_REDIS_URL=redis://localhost:6379/1

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

ENABLE_CACHE=false
CACHE_TTL=0
CACHE_MAX_SIZE=0
ENABLE_COMPRESSION=false
COMPRESSION_LEVEL=0

INDEXING_BATCH_SIZE=10
INDEXING_MAX_CONCURRENT=1
INDEXING_TIMEOUT=60000

SEARCH_MAX_RESULTS=50
SEARCH_TIMEOUT=10000
SEARCH_ENABLE_FUZZY=true
SEARCH_FUZZY_THRESHOLD=0.6

# =============================================================================
# EXTERNAL SERVICES CONFIGURATION
# =============================================================================

OPENAI_API_KEY=test-key
GITHUB_TOKEN=test-token
DOCKER_REGISTRY_TOKEN=test-token

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

DOCKER_ENVIRONMENT=test
DOCKER_COMPOSE_PROJECT=codesight-test
DOCKER_NETWORK=codesight-test-network
DOCKER_EXTERNAL_NETWORK=host

# =============================================================================
# CI/CD CONFIGURATION
# =============================================================================

CI=true
CD=false
GITHUB_ACTIONS=true
BUILD_NUMBER=test
BUILD_COMMIT=test

# =============================================================================
# FEATURE FLAGS
# =============================================================================

ENABLE_TELEMETRY=false
ENABLE_ANALYTICS=false
ENABLE_ERROR_REPORTING=false
ENABLE_AUTO_UPDATES=false
ENABLE_BETA_FEATURES=true